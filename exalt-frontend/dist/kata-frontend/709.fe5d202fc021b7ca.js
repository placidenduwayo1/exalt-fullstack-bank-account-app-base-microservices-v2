"use strict";(self.webpackChunkkata_frontend=self.webpackChunkkata_frontend||[]).push([[709],{9709:(It,x,r)=>{r.r(x),r.d(x,{BankAccountModule:()=>St});var p=r(6814),g=r(180),t=r(4946),u=r(2513),C=r(8445),T=r(5927),i=r(8247),d=r(5219),l=r(95);class E{}class w{}class q{}var L=r(7893),_=r(6980),v=r(6263),f=r(4532),b=r(3714),k=r(2352),U=r(707),Z=r(3904),h=r(515),S=r(3259),I=r(9246);function N(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"th"),t._uU(2,"Account ID"),t._UZ(3,"br"),t.TgZ(4,"span",10),t._UZ(5,"i",11),t.TgZ(6,"input",12),t.NdJ("input",function(s){t.CHM(e),t.oxw();const c=t.MAs(8);return t.KtG(c.filterGlobal(s.target.value,"contains"))}),t.qZA()()(),t.TgZ(7,"th",13),t._uU(8,"Type"),t._UZ(9,"p-sortIcon",14),t.qZA(),t.TgZ(10,"th"),t._uU(11,"State"),t.qZA(),t.TgZ(12,"th",15),t._uU(13,"Balance"),t._UZ(14,"p-sortIcon",16),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Overdraft / I Rate"),t.qZA(),t.TgZ(17,"th",17),t._uU(18,"Creation date"),t._UZ(19,"p-sortIcon",18),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Customer"),t.qZA(),t.TgZ(22,"th",19),t._uU(23,"Customer name "),t._UZ(24,"p-sortIcon",20)(25,"br"),t.TgZ(26,"span",10),t._UZ(27,"i",11),t.TgZ(28,"input",12),t.NdJ("input",function(s){t.CHM(e),t.oxw();const c=t.MAs(8);return t.KtG(c.filterGlobal(s.target.value,"contains"))}),t.qZA()()()()}}function M(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"p-button",27),t.NdJ("onClick",function(){t.CHM(e);const s=t.oxw().$implicit,c=t.oxw();return c.sidebarVisible3=!0,t.KtG(c.loadAccount(s))}),t.qZA()}2&n&&t.Q6J("rounded",!0)("text",!0)}function J(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"p-button",28),t.NdJ("onClick",function(){t.CHM(e);const s=t.oxw().$implicit,c=t.oxw();return c.sidebarVisible1=!0,t.KtG(c.loadAccount(s))}),t.qZA()}2&n&&t.Q6J("rounded",!0)("text",!0)}function O(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"p-button",29),t.NdJ("onClick",function(){t.CHM(e);const s=t.oxw().$implicit,c=t.oxw();return c.sidebarVisible2=!0,t.KtG(c.loadAccount(s))}),t.qZA()}2&n&&t.Q6J("rounded",!0)("text",!0)}function Q(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"p-button",30),t.NdJ("onClick",function(){t.CHM(e);const s=t.oxw().$implicit,c=t.oxw();return c.sidebarVisible4=!0,t.KtG(c.loadAccount(s))}),t.qZA()}2&n&&t.Q6J("rounded",!1)("text",!0)}const R=function(){return{width:"10%"}};function F(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"p-tag",21),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"p-tag",21),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"currency"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"currency"),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.ALo(16,"date"),t.qZA(),t.TgZ(17,"td")(18,"ul")(19,"li")(20,"span"),t._uU(21,"ID"),t.qZA(),t._uU(22),t.qZA(),t.TgZ(23,"li")(24,"span"),t._uU(25,"Name"),t.qZA(),t._uU(26),t.qZA(),t.TgZ(27,"li")(28,"span"),t._uU(29,"Email"),t.qZA(),t._uU(30),t.qZA(),t.TgZ(31,"li")(32,"span"),t._uU(33,"State"),t.qZA(),t._uU(34,": "),t._UZ(35,"p-tag",21),t.qZA()()(),t.TgZ(36,"td"),t._uU(37),t.qZA(),t.TgZ(38,"td"),t.YNc(39,M,1,2,"p-button",22),t.YNc(40,J,1,2,"p-button",23),t.YNc(41,O,1,2,"p-button",24),t.YNc(42,Q,1,2,"p-button",25),t.TgZ(43,"p-button",26),t.NdJ("onClick",function(){const c=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.onSwitchStateAccount(c))}),t.qZA()()()}if(2&n){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Akn(t.DdM(36,R)),t.xp6(1),t.Oqu(e.accountId),t.xp6(2),t.Q6J("value",e.type)("severity",o.getAccountTypeSeverity(e.type)),t.xp6(2),t.Q6J("value",e.state)("severity",o.getAccountStateSeverity(e.state)),t.xp6(2),t.hij(" ",t.xi3(9,24,e.balance,"EUR")," "),t.xp6(3),t.AsE(" ",t.xi3(12,27,e.overdraft,"EUR")," ",t.xi3(13,30,e.interestRate,"1.2-2")," "),t.xp6(4),t.Oqu(t.xi3(16,33,e.createdAt,"medium")),t.xp6(7),t.hij(": ",e.customer.customerId," "),t.xp6(4),t.AsE(": ",e.customer.firstname," ",e.customer.lastname,""),t.xp6(4),t.hij(": ",e.customer.email,""),t.xp6(5),t.Q6J("value",e.customer.state)("severity",o.getCustomerStateSeverity(e.customer.state)),t.xp6(2),t.Oqu(e.customer.lastname),t.xp6(2),t.Q6J("ngIf","current"==e.type&&"active"==e.state&&"active"==e.customer.state),t.xp6(1),t.Q6J("ngIf","current"==e.type&&"active"==e.state&&"active"==e.customer.state),t.xp6(1),t.Q6J("ngIf","saving"==e.type&&"active"==e.state&&"active"==e.customer.state),t.xp6(1),t.Q6J("ngIf","active"==e.state&&"active"==e.customer.state),t.xp6(1),t.Q6J("rounded",!0)("text",!0)}}function D(n,a){if(1&n&&(t.TgZ(0,"div",31),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.accountsList?e.accountsList.length:0," Bank Accounts ")}}const A=function(){return{width:"fit-content"}};function H(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"p-sidebar",32),t.NdJ("visibleChange",function(s){t.CHM(e);const c=t.oxw();return t.KtG(c.sidebarVisible3=s)}),t.TgZ(1,"p-card",33)(2,"form",34)(3,"div")(4,"label",35)(5,"span",36),t._uU(6,"Account ID"),t.qZA()(),t._UZ(7,"br"),t.TgZ(8,"input",37),t.NdJ("ngModelChange",function(s){t.CHM(e);const c=t.oxw();return t.KtG(c.selectedAccount.accountId=s)}),t.qZA()(),t._UZ(9,"br"),t.TgZ(10,"div",38),t._UZ(11,"p-dropdown",39),t.TgZ(12,"label",40),t._uU(13,"select operation type"),t.qZA()(),t._UZ(14,"br"),t.TgZ(15,"div",38),t._UZ(16,"input",41),t.TgZ(17,"label",42),t._uU(18,"input operation mount"),t.qZA()(),t._UZ(19,"br"),t.TgZ(20,"div",43)(21,"p-button",44),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onCreateNewOperation())}),t.qZA(),t._uU(22,"\xa0 "),t._UZ(23,"p-button",45),t.qZA()()()()}if(2&n){const e=t.oxw();t.Akn(t.DdM(11,A)),t.Q6J("visible",e.sidebarVisible3),t.xp6(2),t.Q6J("formGroup",e.operationFormRequest),t.xp6(6),t.Q6J("ngModel",e.selectedAccount.accountId),t.xp6(3),t.Q6J("options",e.operationTypes),t.xp6(10),t.Q6J("text",!0)("raised",!0)("disabled",e.operationFormRequest.invalid),t.xp6(2),t.Q6J("text",!0)("raised",!0)}}function G(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"p-sidebar",32),t.NdJ("visibleChange",function(s){t.CHM(e);const c=t.oxw();return t.KtG(c.sidebarVisible1=s)}),t.TgZ(1,"h3"),t._uU(2,"New Account Overdraft"),t.qZA(),t.TgZ(3,"form",34)(4,"div")(5,"label",35)(6,"span",36),t._uU(7,"Account ID"),t.qZA()(),t._UZ(8,"br"),t.TgZ(9,"input",37),t.NdJ("ngModelChange",function(s){t.CHM(e);const c=t.oxw();return t.KtG(c.selectedAccount.accountId=s)}),t.qZA()(),t._UZ(10,"br"),t.TgZ(11,"div",38),t._UZ(12,"input",46),t.TgZ(13,"label",47),t._uU(14,"new overdraft"),t.qZA()(),t._UZ(15,"br"),t.TgZ(16,"div",43)(17,"p-button",48),t.NdJ("onClick",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.changeAccountOverdraft())}),t.qZA(),t._uU(18,"\xa0 "),t._UZ(19,"p-button",45),t.qZA()()()}if(2&n){const e=t.oxw();t.Akn(t.DdM(10,A)),t.Q6J("visible",e.sidebarVisible1),t.xp6(3),t.Q6J("formGroup",e.overdraftForm),t.xp6(6),t.Q6J("ngModel",e.selectedAccount.accountId),t.xp6(8),t.Q6J("text",!0)("raised",!0)("disabled",e.overdraftForm.invalid),t.xp6(2),t.Q6J("text",!0)("raised",!0)}}function K(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"p-sidebar",32),t.NdJ("visibleChange",function(s){t.CHM(e);const c=t.oxw();return t.KtG(c.sidebarVisible2=s)}),t.TgZ(1,"h3"),t._uU(2,"Change Account Interest Rate "),t.qZA(),t.TgZ(3,"form",34)(4,"div")(5,"label",35)(6,"span",36),t._uU(7,"Account ID"),t.qZA()(),t._UZ(8,"br"),t.TgZ(9,"input",37),t.NdJ("ngModelChange",function(s){t.CHM(e);const c=t.oxw();return t.KtG(c.selectedAccount.accountId=s)}),t.qZA()(),t._UZ(10,"br"),t.TgZ(11,"div",38),t._UZ(12,"input",49),t.TgZ(13,"label",50),t._uU(14,"Input New Interest Rate "),t.qZA()(),t.TgZ(15,"div",43)(16,"p-button",48),t.NdJ("onClick",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.changeAccountInterestRate())}),t.qZA(),t._uU(17,"\xa0 "),t._UZ(18,"p-button",45),t.qZA()()()}if(2&n){const e=t.oxw();t.Akn(t.DdM(10,A)),t.Q6J("visible",e.sidebarVisible2),t.xp6(3),t.Q6J("formGroup",e.iRateForm),t.xp6(6),t.Q6J("ngModel",e.selectedAccount.accountId),t.xp6(7),t.Q6J("text",!0)("raised",!0)("disabled",e.iRateForm.invalid),t.xp6(2),t.Q6J("text",!0)("raised",!0)}}function z(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"p-sidebar",32),t.NdJ("visibleChange",function(s){t.CHM(e);const c=t.oxw();return t.KtG(c.sidebarVisible4=s)}),t.TgZ(1,"p-card",51)(2,"form",34)(3,"div")(4,"label",52),t._uU(5,"Origin account"),t.qZA(),t._UZ(6,"br"),t.TgZ(7,"input",53),t.NdJ("ngModelChange",function(s){t.CHM(e);const c=t.oxw();return t.KtG(c.selectedAccount.accountId=s)}),t.qZA()(),t._UZ(8,"br"),t.TgZ(9,"div",38),t._UZ(10,"input",54),t.TgZ(11,"label",55),t._uU(12,"input destination account ID"),t.qZA()(),t._UZ(13,"br"),t.TgZ(14,"div",38),t._UZ(15,"input",41),t.TgZ(16,"label",42),t._uU(17,"input tranfer mount"),t.qZA()(),t._UZ(18,"br"),t.TgZ(19,"div",43)(20,"p-button",56),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onTransferOperation())}),t.qZA(),t._uU(21,"\xa0 "),t._UZ(22,"p-button",45),t.qZA()()()()}if(2&n){const e=t.oxw();t.Akn(t.DdM(10,A)),t.Q6J("visible",e.sidebarVisible4),t.xp6(2),t.Q6J("formGroup",e.transferFormRequest),t.xp6(5),t.Q6J("ngModel",e.selectedAccount.accountId),t.xp6(13),t.Q6J("text",!0)("raised",!0)("disabled",e.transferFormRequest.invalid),t.xp6(2),t.Q6J("text",!0)("raised",!0)}}const P=function(){return{width:"20vw"}},B=function(){return[5,10,20]},V=function(){return{"min-width":"fit-content"}},j=function(){return["accountId","balance","type","customer.lastname","createdAt"]};let Y=(()=>{class n{constructor(){this.accountsList=[],this.router=(0,t.f3M)(g.F0),this.bankAccountService=(0,t.f3M)(C.A),this.confirmService=(0,t.f3M)(d.YP),this.messageService=(0,t.f3M)(d.ez),this.bankAccountEventService=(0,t.f3M)(T.as),this.operationEventService=(0,t.f3M)(T.ZN),this.operationTypes=[{type:"depot"},{type:"retrait"}],this.operationService=(0,t.f3M)(L.f),this.fb=(0,t.f3M)(l.qu),this.sidebarVisible1=!1,this.sidebarVisible2=!1,this.sidebarVisible3=!1,this.sidebarVisible4=!1,this.isCreating=!0,this.first=Number(localStorage.getItem("accountsPage"))}getAccountStateSeverity(e){return"active"===e?"success":"danger"}getCustomerStateSeverity(e){return"active"===e?"success":"danger"}getAccountTypeSeverity(e){switch(e){case"saving":return"primary";case"current":return"warning";default:return"danger"}}getAccountBalanceSeverity(e){return e.balance>2e3?"success":e.balance<=2e3&&e.balance>500?"warning":"danger"}ngOnInit(){this.operationFormRequest=this.fb.group({account:[{value:"",disabled:!0}],type:["",l.kI.required],mount:["",l.kI.required]}),this.overdraftForm=this.fb.group({account:[{value:"",disabled:!0}],overdraft:[,l.kI.required]}),this.iRateForm=this.fb.group({account:[{value:"",disabled:!0}],interestRate:["",l.kI.required]}),this.transferFormRequest=this.fb.group({origin:[{value:"",disabled:!0}],destination:["",l.kI.required],mount:["",l.kI.required]}),this.bankAccountEventService.bankAccountEventObservable.subscribe({next:e=>{switch(e){case u.uQ.BANK_ACCOUNT_OPERATION_CREATE:this.confirmService.confirm({acceptLabel:i.Z7,rejectLabel:i.QK,message:i.mt,accept:()=>{let s=this.operationFormRequest.value;s.accountId=this.selectedAccount.accountId,s.type=this.operationFormRequest.get("type")?.value.type,setTimeout(()=>{this.operationService.create(s).subscribe({next:c=>(this.messageService.add({key:"key1",severity:i.Am,detail:i.n1,sticky:i.CA}),this.bankAccountEventService.publishEvent(u.uQ.REFRESH),c),error:()=>(this.messageService.add({key:"key2",severity:i.aO,detail:i.Ti,sticky:i.CA}),null),complete:()=>{console.log(i.DI)}}),this.isCreating=!1},i.Vs)},reject:()=>(this.messageService.add({key:"key2",severity:i.aO,detail:i.IH,sticky:i.CA}),null)});break;case u.uQ.BANK_ACCOUNT_SWITCH_STATE:let o=new q;o.accountId=this.selectedAccount.accountId,this.confirmService.confirm({acceptLabel:i.Z7,rejectLabel:i.QK,message:i.mt,accept:()=>{"active"===this.selectedAccount.state?(o.state="suspended",this.bankAccountService.switchState(o).subscribe({next:s=>(this.messageService.add({key:"key1",severity:i.Am,detail:i.n1,sticky:i.CA}),this.bankAccountEventService.publishEvent(u.uQ.REFRESH),s),error:()=>(this.messageService.add({key:"key2",severity:i.aO,detail:i.Ti,sticky:i.CA}),null),complete:()=>{console.log(i.DI)}})):"suspended"==this.selectedAccount.state&&(o.state="active",this.bankAccountService.switchState(o).subscribe({next:s=>(this.messageService.add({key:"key1",severity:i.Am,detail:i.n1,sticky:i.CA}),this.bankAccountEventService.publishEvent(u.uQ.REFRESH),s),error:()=>(this.messageService.add({key:"key2",severity:i.aO,detail:i.Ti,sticky:i.CA}),null),complete:()=>{console.log(i.DI)}}))},reject:()=>{this.messageService.add({key:"key2",severity:i.aO,detail:i.IH,sticky:i.CA})}});break;case u.uQ.BANK_ACCOUNT_CHANGE_OVERDRAFT:this.confirmService.confirm({acceptLabel:i.Z7,rejectLabel:i.QK,message:i.mt,accept:()=>{let s=new w;s.accountId=this.selectedAccount.accountId,s.overdraft=this.overdraftForm.value.overdraft,this.bankAccountService.changeOverdraft(s).subscribe({next:c=>(this.messageService.add({key:"key1",severity:i.Am,detail:i.n1,sticky:i.CA}),this.bankAccountEventService.publishEvent(u.uQ.REFRESH),c),error:()=>(this.messageService.add({key:"key2",severity:i.aO,detail:i.Ti,sticky:i.CA}),null),complete:()=>{console.log(i.DI)}})},reject:()=>(this.messageService.add({key:"key2",severity:i.aO,detail:i.IH,sticky:!0}),null)});break;case u.uQ.BANK_ACCOUNT_CHANGE_INTEREST_RATE:this.confirmService.confirm({acceptLabel:i.Z7,rejectLabel:i.QK,message:i.mt,accept:()=>{let s=new E;s.accountId=this.selectedAccount.accountId,s.interestRate=this.iRateForm.value.interestRate,this.bankAccountService.changeInterestate(s).subscribe({next:c=>(this.messageService.add({key:"key1",severity:i.Am,detail:i.n1,sticky:!0}),this.bankAccountEventService.publishEvent(u.uQ.REFRESH),c),error:()=>(this.messageService.add({key:"key2",severity:i.aO,detail:i.Ti,sticky:i.CA}),null),complete:()=>{console.log(i.DI)}})},reject:()=>(this.messageService.add({key:"key2",severity:i.aO,detail:i.IH,sticky:!0}),i.CA)});break;case u.uQ.BANK_ACCOUNT_TRANSFER_OPERATION:this.confirmService.confirm({acceptLabel:i.Z7,rejectLabel:i.QK,message:i.mt,accept:()=>{let s=this.transferFormRequest.getRawValue();setTimeout(()=>{this.operationService.createTransfer(s).subscribe({next:c=>(this.messageService.add({key:"key1",severity:i.Am,detail:i.n1,sticky:i.CA}),this.bankAccountEventService.publishEvent(u.uQ.REFRESH),c),error:()=>(this.messageService.add({key:"key2",severity:i.aO,detail:i.Ti,sticky:i.CA}),null),complete:()=>{console.log(i.DI)}})},i.Vs)},reject:()=>(this.messageService.add({key:"key2",severity:i.aO,detail:i.IH,sticky:i.CA}),null)})}},error:()=>{this.messageService.add({key:"key2",severity:i.aO,detail:i.Ti,sticky:i.CA})},complete:()=>{console.log(i.DI)}})}loadAccount(e){this.selectedAccount=e,console.log(this.selectedAccount)}onCreateNewOperation(){this.bankAccountEventService.publishEvent(u.uQ.BANK_ACCOUNT_OPERATION_CREATE)}onSwitchStateAccount(e){this.selectedAccount=e,this.bankAccountEventService.publishEvent(u.uQ.BANK_ACCOUNT_SWITCH_STATE)}changeAccountOverdraft(){this.bankAccountEventService.publishEvent(u.uQ.BANK_ACCOUNT_CHANGE_OVERDRAFT)}changeAccountInterestRate(){this.bankAccountEventService.publishEvent(u.uQ.BANK_ACCOUNT_CHANGE_INTEREST_RATE)}onTransferOperation(){this.bankAccountEventService.publishEvent(u.uQ.BANK_ACCOUNT_TRANSFER_OPERATION)}onTablePageChange(e){this.first=e.first,localStorage.setItem("accountsPage",this.first.toString())}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-accounts-list"]],inputs:{accountsList:"accountsList",isLoading:"isLoading"},decls:16,vars:21,consts:[[2,"width","80%"],[2,"color","green","text-align","center"],["key","key1"],["key","key2"],["loadingIcon","pi pi-star pi-spin",3,"value","paginator","rows","rowsPerPageOptions","tableStyle","globalFilterFields","loading","first","onPage"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],["position","right",3,"visible","style","visibleChange",4,"ngIf"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pInputText","","placeholder","search","size","5",3,"input"],["pSortableColumn","type"],["field","type"],["pSortableColumn","balance"],["field","balance"],["pSortableColumn","createdAt"],["field","createdAt"],["pSortableColumn","customer.lastname"],["field","customer.lastname"],[3,"value","severity"],["icon","pi pi-window-maximize","size","small","severity","success","pTooltip","create operation","tooltipPosition","top",3,"rounded","text","onClick",4,"ngIf"],["icon","pi pi-window-maximize","size","small","severity","info","pTooltip","change overdraft","tooltipPosition","top",3,"rounded","text","onClick",4,"ngIf"],["icon","pi pi-window-maximize","size","small","severity","info","pTooltip","change interest rate","tooltipPosition","top",3,"rounded","text","onClick",4,"ngIf"],["icon","pi pi-window-maximize","size","small","pTooltip","tranfer money op","tooltipPosition","top","severity","warning",3,"rounded","text","onClick",4,"ngIf"],["icon","pi pi-pencil","size","small","severity","danger","pTooltip","active/suspend","tooltipPosition","top",3,"rounded","text","onClick"],["icon","pi pi-window-maximize","size","small","severity","success","pTooltip","create operation","tooltipPosition","top",3,"rounded","text","onClick"],["icon","pi pi-window-maximize","size","small","severity","info","pTooltip","change overdraft","tooltipPosition","top",3,"rounded","text","onClick"],["icon","pi pi-window-maximize","size","small","severity","info","pTooltip","change interest rate","tooltipPosition","top",3,"rounded","text","onClick"],["icon","pi pi-window-maximize","size","small","pTooltip","tranfer money op","tooltipPosition","top","severity","warning",3,"rounded","text","onClick"],[1,"flex","align-items-center","justify-content-between"],["position","right",3,"visible","visibleChange"],["header","Create new Operation"],[3,"formGroup"],["for","account"],[2,"font-weight","bold"],["type","text","formControlName","account","id","account","pInputText","",3,"ngModel","ngModelChange"],[1,"p-float-label"],["optionLabel","type","placeholder","Select a operation type","formControlName","type",3,"options"],["for","type"],["type","number","formControlName","mount","id","mount","pInputText",""],["for","mount"],[1,"buttons"],["label","Create",3,"text","raised","disabled","click"],["label","Cancel","severity","danger",3,"text","raised"],["type","number","pInputText","","formControlName","overdraft","id","overdraft"],["for","overdraft"],["label","change","severity","primary",3,"text","raised","disabled","onClick"],["type","number","pInputText","","formControlName","interestRate","id","interestRate"],["for","interestRate"],["header","Create transfer money Operation"],["for","origin"],["type","text","formControlName","origin","id","origin","pInputText","",3,"ngModel","ngModelChange"],["type","text","formControlName","destination","id","destination","pInputText",""],["for","destination"],["label","Transfer",3,"text","raised","disabled","click"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2," Bank accounts and their customers "),t.qZA()(),t.TgZ(3,"p-card"),t._UZ(4,"p-messages",2)(5,"p-messages",3)(6,"p-confirmDialog"),t.TgZ(7,"p-table",4,5),t.NdJ("onPage",function(m){return s.onTablePageChange(m)}),t.YNc(9,N,29,0,"ng-template",6),t.YNc(10,F,44,37,"ng-template",7),t.YNc(11,D,2,1,"ng-template",8),t.qZA()(),t.YNc(12,H,24,12,"p-sidebar",9),t.YNc(13,G,20,11,"p-sidebar",9),t.YNc(14,K,19,11,"p-sidebar",9),t.YNc(15,z,23,11,"p-sidebar",9)),2&o&&(t.xp6(3),t.Akn(t.DdM(16,A)),t.xp6(3),t.Akn(t.DdM(17,P)),t.xp6(1),t.Q6J("value",s.accountsList)("paginator",!0)("rows",5)("rowsPerPageOptions",t.DdM(18,B))("tableStyle",t.DdM(19,V))("globalFilterFields",t.DdM(20,j))("loading",s.isLoading)("first",s.first),t.xp6(5),t.Q6J("ngIf",s.selectedAccount),t.xp6(1),t.Q6J("ngIf",s.selectedAccount),t.xp6(1),t.Q6J("ngIf",s.selectedAccount),t.xp6(1),t.Q6J("ngIf",s.selectedAccount))},dependencies:[p.O5,_.iA,d.jx,_.lQ,_.fz,v.V,f.Z,b.o,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.sg,l.u,k.Lt,U.zx,Z.Q,h.V,S.u,I.Y,p.JJ,p.H9,p.uU],styles:["ul[_ngcontent-%COMP%]{list-style-type:circle}span[_ngcontent-%COMP%]{font-weight:700}"]})}return n})(),$=(()=>{class n{constructor(){this.activatedRoute=(0,t.f3M)(g.gz),this.bankAccountEventService=(0,t.f3M)(T.as),this.bankAccountService=(0,t.f3M)(C.A),this.msgService=(0,t.f3M)(d.ez),this.isLoading=!0}ngOnInit(){setTimeout(()=>{this.activatedRoute.data.subscribe({next:({allAccounts:e})=>(this.accounts=e,this.accounts),error:()=>(this.msgService.add({key:"key2",severity:i.aO,detail:i.Ti,sticky:i.CA}),null),complete:()=>{console.log(i.DI)}}),this.isLoading=!1},i.Vs),this.bankAccountEventService.bankAccountEventObservable.subscribe(e=>{e===u.uQ.REFRESH&&this.bankAccountService.getAll().subscribe({next:o=>{this.accounts=o}})})}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-bank-account-manager"]],decls:1,vars:2,consts:[[3,"accountsList","isLoading"]],template:function(o,s){1&o&&t._UZ(0,"app-accounts-list",0),2&o&&t.Q6J("accountsList",s.accounts)("isLoading",s.isLoading)},dependencies:[Y]})}return n})();var y=r(6556);function W(n,a){1&n&&t._UZ(0,"div")}function X(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"th"),t._uU(2,"Account ID"),t._UZ(3,"br"),t.TgZ(4,"span",12),t._UZ(5,"i",13),t.TgZ(6,"input",14),t.NdJ("input",function(s){t.CHM(e),t.oxw();const c=t.MAs(8);return t.KtG(c.filterGlobal(s.target.value,"contains"))}),t.qZA()()(),t.TgZ(7,"th",15),t._uU(8,"Type"),t._UZ(9,"p-sortIcon",16),t.qZA(),t.TgZ(10,"th"),t._uU(11,"State"),t.qZA(),t.TgZ(12,"th",17),t._uU(13,"Balance"),t._UZ(14,"p-sortIcon",18),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Overdraft / I Rate"),t.qZA(),t.TgZ(17,"th",19),t._uU(18,"Creation date"),t._UZ(19,"p-sortIcon",20),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Customer"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Customer name"),t._UZ(24,"br"),t.TgZ(25,"span",12),t._UZ(26,"i",13),t.TgZ(27,"input",14),t.NdJ("input",function(s){t.CHM(e),t.oxw();const c=t.MAs(8);return t.KtG(c.filterGlobal(s.target.value,"contains"))}),t.qZA()()()()}}const tt=function(){return{width:"10%"}};function et(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"p-tag",21),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"p-tag",21),t.qZA(),t.TgZ(7,"td"),t._UZ(8,"p-tag",21),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"currency"),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"date"),t.qZA(),t.TgZ(16,"td")(17,"ul")(18,"li")(19,"span"),t._uU(20,"ID"),t.qZA(),t._uU(21),t.qZA(),t.TgZ(22,"li")(23,"span"),t._uU(24,"Name"),t.qZA(),t._uU(25),t.qZA(),t.TgZ(26,"li")(27,"span"),t._uU(28,"Email"),t.qZA(),t._uU(29),t.qZA(),t.TgZ(30,"li")(31,"span"),t._uU(32,"State"),t.qZA(),t._uU(33,": "),t._UZ(34,"p-tag",21),t.qZA()()(),t.TgZ(35,"td"),t._uU(36),t.qZA()()),2&n){const e=a.$implicit,o=t.oxw(2);t.xp6(1),t.Akn(t.DdM(28,tt)),t.xp6(1),t.Oqu(e.accountId),t.xp6(2),t.Q6J("value",e.type)("severity",o.getAccountTypeSeverity(e.type)),t.xp6(2),t.Q6J("value",e.state)("severity",o.getAccountStateSeverity(e.state)),t.xp6(2),t.Q6J("value",e.balance)("severity",o.getAccountBalanceSeverity(e)),t.xp6(2),t.AsE(" ",t.xi3(11,19,e.overdraft,"EUR")," ",t.xi3(12,22,e.interestRate,"1.2-2")," "),t.xp6(4),t.Oqu(t.xi3(15,25,e.createdAt,"medium")),t.xp6(7),t.hij(": ",e.customer.customerId," "),t.xp6(4),t.AsE(": ",e.customer.firstname," ",e.customer.lastname,""),t.xp6(4),t.hij(": ",e.customer.email,""),t.xp6(5),t.Q6J("value",e.customer.state)("severity",o.getCustomerStateSeverity(e.customer.state)),t.xp6(2),t.Oqu(e.customer.lastname)}}function nt(n,a){if(1&n&&(t.TgZ(0,"div",22),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.suspendedAcounts?e.suspendedAcounts.length:0," Bank Accounts ")}}const it=function(){return{width:"fit-content"}},st=function(){return{width:"20vw"}},ot=function(){return[5,10,20]},ct=function(){return{"min-width":"fit-content"}},at=function(){return["accountId","balance","type","customer.lastname","createdAt"]};function rt(n,a){if(1&n&&(t.TgZ(0,"div",3)(1,"h3",4),t._uU(2," Suspended bank accounts and their associated customers "),t.qZA()(),t.TgZ(3,"p-card"),t._UZ(4,"p-messages",5)(5,"p-messages",6)(6,"p-confirmDialog"),t.TgZ(7,"p-table",7,8),t.YNc(9,X,28,0,"ng-template",9),t.YNc(10,et,37,29,"ng-template",10),t.YNc(11,nt,2,1,"ng-template",11),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.Akn(t.DdM(11,it)),t.xp6(3),t.Akn(t.DdM(12,st)),t.xp6(1),t.Q6J("value",e.suspendedAcounts)("paginator",!0)("rows",5)("rowsPerPageOptions",t.DdM(13,ot))("tableStyle",t.DdM(14,ct))("globalFilterFields",t.DdM(15,at))("loading",e.isLoading)}}function ut(n,a){1&n&&(t.TgZ(0,"div",3)(1,"h3",23),t._uU(2," No suspended bank accounts "),t.qZA()())}let lt=(()=>{class n{getAccountStateSeverity(e){return"danger"}getCustomerStateSeverity(e){return"active"===e?"success":"danger"}getAccountTypeSeverity(e){switch(e){case"saving":return"primary";case"current":return"warning";default:return"danger"}}getAccountBalanceSeverity(e){return e.balance>2e3?"success":e.balance<=2e3&&e.balance>500?"warning":"danger"}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-suspended-list"]],inputs:{suspendedAcounts:"suspendedAcounts",isLoading:"isLoading",tableEmpty:"tableEmpty"},decls:5,vars:3,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["tableNotEmpty",""],["tableIsEmpty",""],[2,"width","80%"],[2,"color","red","text-align","center"],["key","key1"],["key","key2"],["loadingIcon","pi pi-star pi-spin",3,"value","paginator","rows","rowsPerPageOptions","tableStyle","globalFilterFields","loading"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pInputText","","placeholder","search","size","5",3,"input"],["pSortableColumn","type"],["field","type"],["pSortableColumn","balance"],["field","balance"],["pSortableColumn","createdAt"],["field","createdAt"],[3,"value","severity"],[1,"flex","align-items-center","justify-content-between"],[2,"text-align","center","color","green"]],template:function(o,s){if(1&o&&(t.YNc(0,W,1,0,"div",0),t.YNc(1,rt,12,16,"ng-template",null,1,t.W1O),t.YNc(3,ut,3,0,"ng-template",null,2,t.W1O)),2&o){const c=t.MAs(2),m=t.MAs(4);t.Q6J("ngIf",s.tableEmpty)("ngIfThen",m)("ngIfElse",c)}},dependencies:[p.O5,_.iA,d.jx,_.lQ,_.fz,v.V,f.Z,b.o,Z.Q,h.V,p.JJ,p.H9,p.uU]})}return n})(),pt=(()=>{class n{constructor(){this.activatedRoute=(0,t.f3M)(g.gz),this.messageService=(0,t.f3M)(d.ez),this.isLoading=!0,this.tableEmpty=!1}ngOnInit(){setTimeout(()=>{this.activatedRoute.data.subscribe({next:({allSuspendedAccounts:e})=>{this.suspendedAcounts=e,0==this.suspendedAcounts.length&&(this.tableEmpty=!0)},error:()=>(this.messageService.add({key:"key2",severity:i.aO,detail:i.Ti,sticky:i.CA}),null),complete:()=>{console.log(i.DI)}}),this.isLoading=!1},i.Vs)}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-suspended-account"]],decls:1,vars:3,consts:[[3,"suspendedAcounts","isLoading","tableEmpty"]],template:function(o,s){1&o&&t._UZ(0,"app-suspended-list",0),2&o&&t.Q6J("suspendedAcounts",s.suspendedAcounts)("isLoading",s.isLoading)("tableEmpty",s.tableEmpty)},dependencies:[lt]})}return n})();function dt(n,a){1&n&&t._UZ(0,"div")}function _t(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"th"),t._uU(2,"Account ID"),t._UZ(3,"br"),t.TgZ(4,"span",12),t._UZ(5,"i",13),t.TgZ(6,"input",14),t.NdJ("input",function(s){t.CHM(e),t.oxw();const c=t.MAs(8);return t.KtG(c.filterGlobal(s.target.value,"contains"))}),t.qZA()()(),t.TgZ(7,"th",15),t._uU(8,"Type"),t._UZ(9,"p-sortIcon",16),t.qZA(),t.TgZ(10,"th"),t._uU(11,"State"),t.qZA(),t.TgZ(12,"th",17),t._uU(13,"Balance"),t._UZ(14,"p-sortIcon",18),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Overdraft / I Rate"),t.qZA(),t.TgZ(17,"th",19),t._uU(18,"Creation date"),t._UZ(19,"p-sortIcon",20),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Customer"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Customer name"),t._UZ(24,"br"),t.TgZ(25,"span",12),t._UZ(26,"i",13),t.TgZ(27,"input",14),t.NdJ("input",function(s){t.CHM(e),t.oxw();const c=t.MAs(8);return t.KtG(c.filterGlobal(s.target.value,"contains"))}),t.qZA()()()()}}const mt=function(){return{width:"10%"}};function gt(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"p-tag",21),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"p-tag",21),t.qZA(),t.TgZ(7,"td"),t._UZ(8,"p-tag",21),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"currency"),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"date"),t.qZA(),t.TgZ(16,"td")(17,"ul")(18,"li")(19,"span"),t._uU(20,"ID"),t.qZA(),t._uU(21),t.qZA(),t.TgZ(22,"li")(23,"span"),t._uU(24,"Name"),t.qZA(),t._uU(25),t.qZA(),t.TgZ(26,"li")(27,"span"),t._uU(28,"Email"),t.qZA(),t._uU(29),t.qZA(),t.TgZ(30,"li")(31,"span"),t._uU(32,"State"),t.qZA(),t._uU(33,": "),t._UZ(34,"p-tag",21),t.qZA()()(),t.TgZ(35,"td"),t._uU(36),t.qZA()()),2&n){const e=a.$implicit,o=t.oxw(2);t.xp6(1),t.Akn(t.DdM(28,mt)),t.xp6(1),t.Oqu(e.accountId),t.xp6(2),t.Q6J("value",e.type)("severity",o.getAccountTypeSeverity(e.type)),t.xp6(2),t.Q6J("value",e.state)("severity",o.getAccountStateSeverity(e.state)),t.xp6(2),t.Q6J("value",e.balance)("severity",o.getAccountBalanceSeverity(e)),t.xp6(2),t.AsE(" ",t.xi3(11,19,e.overdraft,"EUR")," ",t.xi3(12,22,e.interestRate,"1.2-2")," "),t.xp6(4),t.Oqu(t.xi3(15,25,e.createdAt,"medium")),t.xp6(7),t.hij(": ",e.customer.customerId," "),t.xp6(4),t.AsE(": ",e.customer.firstname," ",e.customer.lastname,""),t.xp6(4),t.hij(": ",e.customer.email,""),t.xp6(5),t.Q6J("value",e.customer.state)("severity",o.getCustomerStateSeverity(e.customer.state)),t.xp6(2),t.Oqu(e.customer.lastname)}}function At(n,a){if(1&n&&(t.TgZ(0,"div",22),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.riskAccounts?e.riskAccounts.length:0," Bank Accounts ")}}const vt=function(){return{width:"fit-content"}},ft=function(){return{width:"20vw"}},bt=function(){return[5,10,20]},Zt=function(){return{"min-width":"fit-content"}},ht=function(){return["accountId","balance","type","customer.lastname","createdAt"]};function Tt(n,a){if(1&n&&(t.TgZ(0,"div",3)(1,"h3",4),t._uU(2," Risk bank accounts and their associated customers "),t.qZA()(),t.TgZ(3,"p-card"),t._UZ(4,"p-messages",5)(5,"p-messages",6)(6,"p-confirmDialog"),t.TgZ(7,"p-table",7,8),t.YNc(9,_t,28,0,"ng-template",9),t.YNc(10,gt,37,29,"ng-template",10),t.YNc(11,At,2,1,"ng-template",11),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.Akn(t.DdM(11,vt)),t.xp6(3),t.Akn(t.DdM(12,ft)),t.xp6(1),t.Q6J("value",e.riskAccounts)("paginator",!0)("rows",5)("rowsPerPageOptions",t.DdM(13,bt))("tableStyle",t.DdM(14,Zt))("globalFilterFields",t.DdM(15,ht))("loading",e.isLoading)}}function yt(n,a){1&n&&(t.TgZ(0,"div",3)(1,"h3",23),t._uU(2," No risk bank accounts "),t.qZA()())}let xt=(()=>{class n{getAccountStateSeverity(e){return"active"===e?"success":"danger"}getCustomerStateSeverity(e){return"active"===e?"success":"danger"}getAccountTypeSeverity(e){switch(e){case"saving":return"primary";case"current":return"warning";default:return"danger"}}getAccountBalanceSeverity(e){return e.balance>2e3?"success":e.balance<=2e3&&e.balance>500?"warning":"danger"}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-list"]],inputs:{riskAccounts:"riskAccounts",isLoading:"isLoading",tableEmpty:"tableEmpty"},decls:5,vars:3,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["tableNotEmpty",""],["tableIsEmpty",""],[2,"width","80%"],[2,"color","red","text-align","center"],["key","key1"],["key","key2"],["loadingIcon","pi pi-star pi-spin",3,"value","paginator","rows","rowsPerPageOptions","tableStyle","globalFilterFields","loading"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pInputText","","placeholder","search","size","5",3,"input"],["pSortableColumn","type"],["field","type"],["pSortableColumn","balance"],["field","balance"],["pSortableColumn","createdAt"],["field","createdAt"],[3,"value","severity"],[1,"flex","align-items-center","justify-content-between"],[2,"text-align","center","color","green"]],template:function(o,s){if(1&o&&(t.YNc(0,dt,1,0,"div",0),t.YNc(1,Tt,12,16,"ng-template",null,1,t.W1O),t.YNc(3,yt,3,0,"ng-template",null,2,t.W1O)),2&o){const c=t.MAs(2),m=t.MAs(4);t.Q6J("ngIf",s.tableEmpty)("ngIfThen",m)("ngIfElse",c)}},dependencies:[p.O5,_.iA,d.jx,_.lQ,_.fz,v.V,f.Z,b.o,Z.Q,h.V,p.JJ,p.H9,p.uU]})}return n})();const kt=[{path:"",component:$,resolve:{allAccounts:y.Et}},{path:"suspended",component:pt,resolve:{allSuspendedAccounts:y.Y4}},{path:"to-risk",component:(()=>{class n{constructor(){this.activatedRoute=(0,t.f3M)(g.gz),this.messageService=(0,t.f3M)(d.ez),this.isLoading=!0,this.tableEmpty=!1}ngOnInit(){setTimeout(()=>{this.activatedRoute.data.subscribe({next:({allRiskAccounts:e})=>{this.riskAccounts=e,0==this.riskAccounts.length&&(this.tableEmpty=!0)},error:()=>(this.messageService.add({key:"key2",severity:i.aO,detail:i.Ti,sticky:i.CA}),null),complete:()=>{console.log(i.DI)}}),this.isLoading=!1},i.Vs)}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-risk-bank-account"]],decls:1,vars:3,consts:[[3,"riskAccounts","isLoading","tableEmpty"]],template:function(o,s){1&o&&t._UZ(0,"app-list",0),2&o&&t.Q6J("riskAccounts",s.riskAccounts)("isLoading",s.isLoading)("tableEmpty",s.tableEmpty)},dependencies:[xt]})}return n})(),resolve:{allRiskAccounts:y.Gu}}];let Ut=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[g.Bz.forChild(kt),g.Bz]})}return n})(),St=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({providers:[d.YP,d.ez],imports:[p.ez,Ut,_.U$,v.W,f.d,b.j,l.u5,l.UX,k.kW,U.hJ,Z.D,h.$,S.z,I.l]})}return n})()}}]);