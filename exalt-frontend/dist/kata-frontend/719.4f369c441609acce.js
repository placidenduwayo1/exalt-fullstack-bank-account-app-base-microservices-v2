"use strict";(self.webpackChunkkata_frontend=self.webpackChunkkata_frontend||[]).push([[719],{9719:(H,v,o)=>{o.r(v),o.d(v,{UserModule:()=>j});var m=o(6814),h=o(180),e=o(4946),p=o(5219),s=o(8247),a=o(2513),f=o(5927),b=o(158),d=o(95);class U{}var g=o(6980),C=o(4532),T=o(707),x=o(9246),E=o(3259),S=o(3714),Z=o(3904),L=o(515);function y(r,u){1&r&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"ID"),e.qZA(),e.TgZ(3,"th",9),e._uU(4,"username "),e._UZ(5,"p-sortIcon",10),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Name"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Email"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Created Date"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Roles"),e.qZA()())}function k(r,u){if(1&r&&(e.ynx(0),e._uU(1),e.BQk()),2&r){const t=u.$implicit;e.xp6(1),e.hij(" ",t.roleName," ")}}function A(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td"),e.YNc(13,k,2,1,"ng-container",11),e.qZA(),e.TgZ(14,"td")(15,"p-button",12),e.NdJ("onClick",function(){const l=e.CHM(t).$implicit,c=e.oxw();return c.onLoadUser(l),c.addButtonClicked(),e.KtG(c.userRoleSidebarVisible=!0)}),e.qZA(),e.TgZ(16,"p-button",13),e.NdJ("onClick",function(){const l=e.CHM(t).$implicit,c=e.oxw();return c.onLoadUser(l),c.removeButtonClicked(),e.KtG(c.userRoleSidebarVisible=!0)}),e.qZA(),e.TgZ(17,"p-button",14),e.NdJ("onClick",function(){const l=e.CHM(t).$implicit,c=e.oxw();return c.userEditSidebarVisible=!0,e.KtG(c.onLoadUser1(l))}),e.qZA(),e.TgZ(18,"p-button",15),e.NdJ("onClick",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.deleteUser(l))}),e.qZA()()()}if(2&r){const t=u.$implicit;e.xp6(2),e.hij(" ",t.userId," "),e.xp6(2),e.hij(" ",t.username," "),e.xp6(2),e.AsE(" ",t.firstname," ",t.lastname," "),e.xp6(2),e.hij(" ",t.email," "),e.xp6(2),e.hij(" ",e.xi3(11,15,t.createdAt,"medium")," "),e.xp6(3),e.Q6J("ngForOf",t.roles),e.xp6(2),e.Q6J("rounded",!0)("text",!0),e.xp6(1),e.Q6J("rounded",!0)("text",!0),e.xp6(1),e.Q6J("rounded",!0)("text",!0),e.xp6(1),e.Q6J("rounded",!0)("text",!0)}}function M(r,u){if(1&r&&(e.TgZ(0,"div",16),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.inputUsers?t.inputUsers.length:0," Operations ")}}const _=function(){return{width:"fit-content"}};function R(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"p-sidebar",17),e.NdJ("visibleChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.userRoleSidebarVisible=n)}),e.TgZ(1,"p-card",18)(2,"form",19)(3,"div")(4,"label",20),e._uU(5,"User"),e.qZA(),e._UZ(6,"br"),e.TgZ(7,"input",21),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedUserNgModel=n)}),e.qZA()(),e._UZ(8,"br"),e.TgZ(9,"div",22),e._UZ(10,"input",23),e.TgZ(11,"label",24),e._uU(12),e.qZA()(),e._UZ(13,"br"),e.TgZ(14,"div",25)(15,"p-button",26),e.NdJ("onClick",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.assignUserRole())}),e.qZA()()()()()}if(2&r){const t=e.oxw();e.Akn(e.DdM(9,_)),e.Q6J("visible",t.userRoleSidebarVisible)("position",t.sidebarPosition),e.xp6(1),e.Q6J("header",t.headerMsg),e.xp6(1),e.Q6J("formGroup",t.addRoleForm),e.xp6(5),e.Q6J("ngModel",t.selectedUserNgModel),e.xp6(5),e.hij("new role to ",t.selectedUser.username," "),e.xp6(3),e.Q6J("disabled",t.addRoleForm.invalid)}}function I(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"p-sidebar",17),e.NdJ("visibleChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.userEditSidebarVisible=n)}),e.TgZ(1,"p-card",18)(2,"form",19)(3,"div",22)(4,"input",27),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.newSelectedUser.firstname=n)}),e.qZA(),e.TgZ(5,"label",28),e._uU(6,"firstname"),e.qZA()(),e._UZ(7,"br"),e.TgZ(8,"div",22)(9,"input",29),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.newSelectedUser.lastname=n)}),e.qZA(),e.TgZ(10,"label",30),e._uU(11,"lastname"),e.qZA()(),e._UZ(12,"br"),e.TgZ(13,"div",22)(14,"input",31),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.newSelectedUser.email=n)}),e.qZA(),e.TgZ(15,"label",32),e._uU(16,"email"),e.qZA()(),e._UZ(17,"br"),e.TgZ(18,"div",25)(19,"p-button",26),e.NdJ("onClick",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.editUser())}),e.qZA()()()()()}if(2&r){const t=e.oxw();e.Akn(e.DdM(10,_)),e.Q6J("visible",t.userEditSidebarVisible)("position",t.sidebarPosition),e.xp6(1),e.MGl("header","Edit ",t.newSelectedUser.username,""),e.xp6(1),e.Q6J("formGroup",t.editUserForm),e.xp6(2),e.Q6J("ngModel",t.newSelectedUser.firstname),e.xp6(5),e.Q6J("ngModel",t.newSelectedUser.lastname),e.xp6(5),e.Q6J("ngModel",t.newSelectedUser.email),e.xp6(5),e.Q6J("disabled",t.editUserForm.invalid)}}const N=function(){return{width:"20wv"}},J=function(){return["username"]},w=function(){return[10,20,30]};let O=(()=>{class r{constructor(){this.userRoleSidebarVisible=!1,this.sidebarPosition="right",this.userEditSidebarVisible=!1,this.fb=(0,e.f3M)(d.qu),this.userEventService=(0,e.f3M)(f._u),this.confirmService=(0,e.f3M)(p.YP),this.msgService=(0,e.f3M)(p.ez),this.userService=(0,e.f3M)(b.K),this.first=Number(window.localStorage.getItem("usersPage"))}ngOnInit(){this.editUserForm=this.fb.group({firstname:["",d.kI.required],lastname:["",d.kI.required],email:["",[d.kI.required,d.kI.email]]}),this.userEventService.userEventObservable.subscribe(t=>{switch(t){case a.LT.ADD_ROLE_BUTTON_CLICKED:console.log(t),this.headerMsg="Add Role to User",this.addRoleForm=this.fb.group({user:[{value:"",disabled:!0}],roleName:["",d.kI.required]});break;case a.LT.REMOVE_ROLE_BUTTON_CLICKED:console.log(t),this.headerMsg="Remove Role from User",this.addRoleForm=this.fb.group({user:[{value:"",disabled:!0}],roleName:["",d.kI.required]});break;case a.LT.USER_ROLE_ADD:console.log(t),this.confirmService.confirm({acceptLabel:s.Z7,rejectLabel:s.QK,message:s.mt,accept:()=>{let i=new U;i.userId=this.selectedUser.userId,i.roleName=this.addRoleForm.value.roleName,this.userService.userAddRole(i).subscribe({next:n=>(this.msgService.add({key:"key1",severity:s.Am,detail:s.n1,sticky:s.CA}),this.userEventService.publishEvent(a.LT.REFRESH),n),error:()=>(this.msgService.add({key:"key2",severity:s.aO,detail:s.Ti,sticky:s.CA}),null),complete:()=>{console.log(s.DI)}})},reject:()=>(this.msgService.add({key:"key2",severity:s.aO,detail:s.IH,sticky:s.CA}),null)});break;case a.LT.USER_ROLE_REMOVE:console.log(t),this.confirmService.confirm({acceptLabel:s.Z7,rejectLabel:s.QK,message:s.mt,accept:()=>{let i=new U;i.userId=this.selectedUser.userId,i.roleName=this.addRoleForm.value.roleName,this.userService.userRemoveRole(i).subscribe({next:n=>(this.msgService.add({key:"key1",severity:s.Am,detail:s.n1,sticky:s.CA}),this.userEventService.publishEvent(a.LT.REFRESH),n),error:()=>(this.msgService.add({key:"key2",severity:s.aO,detail:s.Ti,sticky:s.CA}),null),complete:()=>{console.log(s.DI)}})},reject:()=>(this.msgService.add({key:"key2",severity:s.aO,detail:s.IH,sticky:s.CA}),null)});break;case a.LT.USER_DELETE:console.log(t),this.confirmService.confirm({acceptLabel:s.Z7,rejectLabel:s.QK,message:s.mt,accept:()=>{this.userService.deleteUser(this.userId).subscribe({next:i=>(this.msgService.add({key:"key1",severity:s.Am,detail:s.n1,sticky:s.CA}),this.userEventService.publishEvent(a.LT.REFRESH),i),error:()=>(this.msgService.add({key:"key2",severity:s.aO,detail:s.Ti,sticky:s.CA}),null),complete:()=>{console.log(s.DI)}})},reject:()=>(this.msgService.add({key:"key2",severity:s.aO,detail:s.IH,sticky:s.CA}),null)});break;case a.LT.USER_EDIT:console.log(t),this.confirmService.confirm({acceptLabel:s.Z7,rejectLabel:s.QK,message:s.mt,accept:()=>{this.userService.editUserInformation(this.newSelectedUser.userId,this.editUserForm.value).subscribe({next:i=>(this.msgService.add({key:"key1",severity:s.Am,detail:s.n1,sticky:s.CA}),this.userEventService.publishEvent(a.LT.REFRESH),i),error:()=>(this.msgService.add({key:"key2",severity:s.aO,detail:s.Ti,sticky:s.CA}),null),complete:()=>{console.log(s.DI)}})},reject:()=>(this.msgService.add({key:"key2",severity:s.aO,detail:s.IH,sticky:s.CA}),null)})}})}onLoadUser(t){this.selectedUser=t,this.selectedUserNgModel=t.userId+" "+t.username}assignUserRole(){"Add Role to User"===this.headerMsg?this.userEventService.publishEvent(a.LT.USER_ROLE_ADD):"Remove Role from User"===this.headerMsg&&this.userEventService.publishEvent(a.LT.USER_ROLE_REMOVE)}addButtonClicked(){this.userEventService.publishEvent(a.LT.ADD_ROLE_BUTTON_CLICKED)}removeButtonClicked(){this.userEventService.publishEvent(a.LT.REMOVE_ROLE_BUTTON_CLICKED)}deleteUser(t){this.userId=t.userId,this.userEventService.publishEvent(a.LT.USER_DELETE)}onLoadUser1(t){this.newSelectedUser=t}editUser(){this.userEventService.publishEvent(a.LT.USER_EDIT)}onTablePageChange(t){this.first=t.first,window.localStorage.setItem("usersPage",this.first.toString())}static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-users-list"]],inputs:{inputUsers:"inputUsers",isLoading:"isLoading"},decls:13,vars:17,consts:[[2,"width","50%"],[2,"color","green","text-align","center"],["key","key1"],["key","key2"],["loadingIcon","pi pi-star pi-spin",3,"value","globalFilterFields","paginator","rows","rowsPerPageOptions","loading","first","onPage"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],[3,"visible","position","style","visibleChange",4,"ngIf"],["pSortableColumn","username"],["field","username"],[4,"ngFor","ngForOf"],["icon","pi pi-window-maximize","size","small","pTooltip","add role","tooltipPosition","left","severity","success",3,"rounded","text","onClick"],["icon","pi pi-window-maximize","size","small","severity","danger","pTooltip","remove role","tooltipPosition","left",3,"rounded","text","onClick"],["icon","pi pi-window-maximize","size","small","pTooltip","edit user","tooltipPosition","left",3,"rounded","text","onClick"],["icon","pi pi-times","size","small","severity","danger","pTooltip","delete user","tooltipPosition","left",3,"rounded","text","onClick"],[1,"flex","align-items-center","justify-content-between"],[3,"visible","position","visibleChange"],[3,"header"],[3,"formGroup"],["for","user"],["pInputText","","id","user","formControlName","user",3,"ngModel","ngModelChange"],[1,"p-float-label"],["pInputText","","id","roleName","formControlName","roleName"],["for","roleName"],[1,"buttons"],["size","small","label","Submit",3,"disabled","onClick"],["pInputText","","id","firstname","formControlName","firstname",3,"ngModel","ngModelChange"],["for","firstname"],["pInputText","","id","lastname","formControlName","lastname",3,"ngModel","ngModelChange"],["for","lastname"],["pInputText","","id","email","formControlName","email",3,"ngModel","ngModelChange"],["for","email"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"h1",1),e._uU(2," List of all users "),e.qZA()(),e._UZ(3,"p-confirmDialog")(4,"p-messages",2)(5,"p-messages",3),e.TgZ(6,"p-card")(7,"p-table",4),e.NdJ("onPage",function(c){return n.onTablePageChange(c)}),e.YNc(8,y,14,0,"ng-template",5),e.YNc(9,A,19,18,"ng-template",6),e.YNc(10,M,2,1,"ng-template",7),e.qZA()(),e.YNc(11,R,16,10,"p-sidebar",8),e.YNc(12,I,20,11,"p-sidebar",8)),2&i&&(e.xp6(3),e.Akn(e.DdM(13,N)),e.xp6(3),e.Akn(e.DdM(14,_)),e.xp6(1),e.Q6J("value",n.inputUsers)("globalFilterFields",e.DdM(15,J))("paginator",!0)("rows",10)("rowsPerPageOptions",e.DdM(16,w))("loading",n.isLoading)("first",n.first),e.xp6(4),e.Q6J("ngIf",n.selectedUser),e.xp6(1),e.Q6J("ngIf",n.newSelectedUser))},dependencies:[m.sg,m.O5,g.iA,p.jx,g.lQ,g.fz,C.Z,T.zx,x.Y,E.u,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,S.o,Z.Q,L.V,m.uU]})}return r})();const Q=[{path:"",component:(()=>{class r{constructor(){this.activatedRoute=(0,e.f3M)(h.gz),this.userEventService=(0,e.f3M)(f._u),this.userService=(0,e.f3M)(b.K),this.msgService=(0,e.f3M)(p.ez),this.isLoading=!0}ngOnInit(){setTimeout(()=>{this.activatedRoute.data.subscribe({next:({allUsers:t})=>(this.users=t,this.users),error:()=>(this.msgService.add({key:"key2",severity:s.aO,detail:s.Ti,sticky:s.CA}),null),complete:()=>{console.log(s.DI)}}),this.isLoading=!1},s.Vs),this.userEventService.userEventObservable.subscribe(t=>{t===a.LT.REFRESH&&this.userService.getAllUsers().subscribe(i=>{this.users=i})})}static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-manager"]],decls:1,vars:2,consts:[[3,"inputUsers","isLoading"]],template:function(i,n){1&i&&e._UZ(0,"app-users-list",0),2&i&&e.Q6J("inputUsers",n.users)("isLoading",n.isLoading)},dependencies:[O]})}return r})(),resolve:{allUsers:o(6556).l0}}];let K=(()=>{class r{static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275mod=e.oAB({type:r});static#s=this.\u0275inj=e.cJS({imports:[h.Bz.forChild(Q),h.Bz]})}return r})(),j=(()=>{class r{static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275mod=e.oAB({type:r});static#s=this.\u0275inj=e.cJS({providers:[p.YP,p.ez],imports:[m.ez,K,g.U$,C.d,T.hJ,x.l,E.z,d.u5,d.UX,S.j,Z.D,L.$]})}return r})()}}]);